package main

import (
	"encoding/json"
	"gpt-token-helper/services"
	"log"
)
func RefreshToken(sessionToken string) {
	var s services.Service
	token, err := s.GetAccessTokenBySessionToken(sessionToken)
	if err != nil {
		log.Println(err.Error())
	}
	log.Println(token)
	var m map[string]interface{}
	err = json.Unmarshal([]byte(token), &m)
	if err != nil {
		log.Println(err.Error())
	}
	accessToken := m["access_token"].(string)
	log.Println(accessToken)
	shareToken, err := s.RefreshShareToken(accessToken, "songxianzhi521")
	if err != nil {
		log.Println(err.Error())
	}
	log.Println(shareToken)
}

func main() {
	sessionToken := "eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..3NBmHqdO6vyG32xZ.hpJDu1Uwboo2Unhyps4gk7eeaE31B1nEYDMryUufspXJ9EK4dKGES-4TFEfgAG5_0o5t9qxZUgrf2zqFpWpSLc1NzfoBDik0I3oSVdJInJkv4rPeV-4z8Q51_HQNMZ1xaHCJS4SPc7qzm78hA8yrbk6jEDSytMjAVlMa5KqTPa1r9Gnyofq8u6rV1-oztgTF4t47YzXzYuxiLbfavLL6RlxPH1U4d8FRoOU4AisJ4AqrV3LfrEUXsJBLcqKKJ9ksa9QfyuD9OQjLZpNLPa50iSPDn6Jl4B1JetnyE0xb07gXZ7Fxkl_9YuDZvBX28_DukERkKLWkeyC-4aAPfQCMdBlzxfaUE4Bt5jhehixQ_TGLhP6D5S0adbK3v_lcMnxPS46Qj_rOG8GRyKIaw7XEkZ65OYRKf2fbp5XGouiugw7by91JgztMLcHEy3GlSlhbZ9yark_mYXZbW-wwI80hsO7u4CENnZilj0PBoeLD9pnji4v8CHoklaTBxOAJG60GCFox1G0kIsDIT4GBxZ7pJNVIPRMJicCZv2bamCsOfTQ5OS3YAjSh0KWc2PwEgYddwebOGj2V8JEVpEYkKAYRS8mNKFuS96AorkjyS58nsr5fuDo-_KF-nyolMypIZE23w5Fn8Hp61yscG5L9iwwCBjMAt1LIJh0ELK3PNcutdcBD2Z3pDsNallJT2sH9gLDWej48eeYV_-v8ANNE4dI_FoHga0g2FFQSzuij53Eq9g_BHT9DFIPSFaOyEu3SHxpL818Np-xiRvx_KYqEfMDaojLW_zS0df4YrF5BXs-DNx1pqerad-oRFqTunGNOPv4t4iTR9SDsec6SJsdyknwp0NnFrj8Kwn8VqRec873qBY0adJj-YS4NztqRnppnZr7ANpxAhM-48nuTqOj4tqlZT5x5ics9QCRPseT4GXd_WtsIBFn3Vq1SBP8q_o1Iloe2iMYtA4VrZUS9ySL6b7mGHW1jhGfC11G5HIaZaiJZoFshctru7YI3H-Pktu1SNo61BVoMgTSb-rIXDpgJgOxrco4fcynj6mBolGItZbBqQo8vMlnfrDo3gayoMtw4fxK3nanmdUjQrzOqdGzzQySOPOcZdj4rh6lnZ_kgeyVPZ2JyL2GeCR3EEr8CXmtSXn6C-8vF4ALpuOomi-6-1uVqkeNtly96ARdhVOA_5G7SRbKNw9Z_F_qzH7LXqnZJet2-i9AojTJzndZ-8j2GX4CLoFrkoAgH_z-Wi9MCpvcxOxHKUUu_P8jQgLSnjt-Fg4xSXEzIhR7k2Xt6o5FHlz5PC6r1aoSoQ6t43ooUR3S7H7j6MUZ5L56TbRWsyIzfQWxMq6tsxwIFsH7sN7In39J1akXfcWmzI7HQ1uCb9LcFjhaTi7uyOUwZXdXYE4fFAASnpGrIv1zwD62BRTx8BixM_PNzFZQcun7x9-H5uRVEzhxSbl_oQckzNf4Svcp5f48eTMhavrFmXb3DLyD_bgh8eMNpy0di7-m4M6vuiN8QZN1wt_CFOXXmMabkBGudjHLzH-aqDIyacvxBRbJvjgGH_PElI1GGlAVgY1xS_GoNExaSFZaEZ33hSp_GygcZmCx0vyRJoeWaWwpPGCZvvdEqeRPL8uuMFXPloNtR4E925oz44Itz7j9UJeY2P6dRp4VYdOoEiYyGaRR0GMQy0HlVHXztZoMtCO_FLtHGagC2-NifNsrETTdLL_qtd3d052E6Iq4GPs3ZrBUCwuntYmdWi54r-TkLJ6APuaMYcIqK9dlrI7YrXz7wYE8FQ4yIC0MQGxDC70gjCTh76_gy4vNed1gsV4n43I7btPKCLbr8xex1fT9A06tFTXbkgaTKCHbcur2oZ09F6VahT8-cEgO-Z7JyIioNMH7DZUR8tSaWaIe-QBia8ewZUIectLHat9ZZj9p-b2lsgGtFTmghnLgEDxBvP8sjhBeac9CQ2d6yZcL4sQILTaTBA-f7Cg45N0B5VE3h4gPzLR5S96aUJRE297xVoCVYE1YPuP0b2nWLHDX0sSHUpvTTb0YeYPK9GClTWvdlQkebLa1CJ_9asSlO4J0fSOniSD4yz7--3s3DfESE32FDBtdFvk4Snqu3B0cOwicz2L9W_fQdLIqChO2VoE4us-wrXH2V3YBcUinxLRCAlVKyvi15YIn7ySqHDpd5eillDZ7hh4nsN4k4dfLRLAUIZLjclgMfwve-lKm8qBbwupToSaHCHOH7YQhvuMH0CoLJ1douBqcu1cAnr8HvuyGSrQ2I2Uj55xeXohF3RXaYxtN0tGrDNeEyKq_rZPqwdibNwrkcYUrO4UrMBGOBe77RL9PUEdjfBPHQLEYDT9f7W39oJ2GgJ8lS4a2gZyUoiQt-USspgg_KfiVVeSMTku3Bi2ocga5OThzjC-2ZkW-_KJ3JvUNdOn_rvJFLs662GfzJiYMWvsu_2Wp4xGR3hyRSPBcPNltlwzGRC5ARjTug8gZR4ZP92U5_quxtH-8NhYh54N0VkLAMSU3tOzcFL6ksO-ANPBOcAbYT3xKOMFdx5CaD1r7cUHd4c895Sw5tbNnDdz6kyHJBVWZY-ZuelGMl0Bo1Uuhi2wYvrLtiDsqO4t5hOSg7kv0a3YuC4-qTMsZpd_we18RvTG1FonKHG32IHq6erdB2_Dbnh_BkyR2PGcWYoBsjmsaJRPTfwlcQuSb_4KemnViZovcexsM8saa1eWDJ8m4WIGqotSVM66quvAGXo2lLykMC2CsQxJxq0aO723T3yP2RxrJ-6rY6shHrftAOnG9iYQsxKn80l0uPHYAHFmgqxSPw92NOJIo8GGElWZ6S8Z5c-ZeQAW4_t1TSsRh5PZdugI5Jbvp_0mJKPR1CBLx6ocx0syw-2WU3hM1pKJDlOuErK-iAp-S-WtEVPqj4ncul7QUb0waBuU_JU5bJ_0FzhihOXpxOnGThYTjmU-jk.-ixDkkhsJ0O_FkuyLTU_ng"
	RefreshToken(sessionToken)
}
